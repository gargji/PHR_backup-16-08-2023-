<div class="container-fluid">
    <div class="row">
        <div class="col-lg-12">
            <div class="row">
                <div class="col-lg-12 appointmentschudule ">
                    <div class="row " style="margin-top: 65px;">
                        <div class="col-lg-9">
                            <div class="mb-3">
                                <h1>Appointment And Visits ({{usernames}})</h1>
                            </div>
                        </div>
                        <div class="col-lg-3 btnappoinment">
                            <button routerLink="../book_appointment" class="messageview" fdprocessedid="vbz069">Schedule An Appointment</button>
                            <!-- <a routerLink="#"> <img src="assets/printer.png" width="20%" height="auto" alt="Avatar"></a>        -->
                        </div>


                    </div>
                    <!--  -->
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="card">
                                <p-tabView styleClass="tabview-custom"  [(activeIndex)]="activeIndex">
                                    <p-tabPanel>
                                        <ng-template pTemplate="header">
                                            <span>Upcoming Visits</span>
                                        </ng-template>
                                        <div class="row">
                                            <!-- <button id="roomButton"  style="margin-left: .5rem;padding: .3rem .5rem !important;" (click)="getSignature()">Join Room</button> -->
                                            <div class="col-lg-4" *ngFor="let item of comming_visit">
                                                <div class="w3-card-4 pastVisitscard" style="">

                                                    <div class="w3-container BlockMain">

                                                        <div class="row" style="padding-top: 10px; display: block;">

                                                            <!-- <div class="blockdetail" style="padding-bottom: 10px;">

                                                            <p style="font-size: 20px; color:rgb(23, 15, 146); font-weight: bold;"><b style="color: black;">Reason Of Visit :</b> {{item.resionofvisit}} </p>
                                                            <p><b>Provider Name :</b> {{item.provider_name}}</p>
                                                            <p><b>Patient Name :</b> {{item.patient_name}}</p>
                                                            <p><b>Start Date :</b> {{item.start_date}}</p>
                                                            <p><b>End Date :</b> {{item.end_date}}</p>
                                                            <p><b>Duration :</b> {{item.Duration}}</p> -->
                                                            <!-- <p><b>Location :</b> {{item.Add_location}}</p> -->
                                                            <!-- <p><b>Arrived Time :</b> {{item.Arrived_time}}</p> -->
                                                            <!-- <p><b>Start Visit Time :</b> {{item.start_visit_time}}</p> -->
                                                            <!-- <p><b>Checkout Time :</b> {{item.checkout_time}}</p> -->
                                                            <!-- <p><b>Date Of Service :</b> {{item.DateofService}}</p>  -->
                                                            <!-- <p><b>Physical Location :</b> {{item.PhysicalLocation}}</p> -->
                                                            <!-- <i class="fa fa-info-circle" aria-hidden="true"></i> <span> Learn More </span> -->
                                                            <!-- </div> -->
                                                            <!-- changes for new api -->
                                                            <!-- <div class="col-md-3">    <p style="position: relative; top: 50%;">{{item.start_date | date:'d/M/y'}}</p></div> -->

                                                          
                                                            <div class="col">      
                                                                <p-menu #menu [model]="items" [popup]="true" appendTo="body" (onShow)='data(item.id)'></p-menu>
                                                                <div  *ngIf="item.uploaded_by=='PHR'"  class="text-right dots" style="position: absolute;
                                                                DISPLAY: INLINE;
                                                                right: 30px;">
                                                                    <i class="pi pi-ellipsis-v dots1" (click)="menu.toggle($event)" ></i>
                                                                </div>
                                                                 <div class="blockdetail" style="padding-bottom: 10px;">
                                                                <!-- <p-avatar image="https://primefaces.org/cdn/primeng/images/demo/avatar/amyelsner.png" styleClass="mr-2" class="text-center" size="xlarge" shape="circle"></p-avatar> -->
                                                               <p  title={{item.reason}} style="font-size: 20px; color:rgb(23, 15, 146); font-weight: bold; height: 24px
                                                                ; overflow: hidden;text-overflow: ellipsis; white-space: nowrap;"><b style="color: black;"> </b> {{item.reason}} </p>
                                                                <p>
                                                                    <b>
                                                                        <!-- <i class="fas fa-user-md"></i> -->
                                                                        <i class="fa fa-regular fa-stethoscope"></i>
                                                                    </b>
                                                                     {{item.provider}}</p>
                                                                <!-- <p><b>Patient Name :</b> {{item.patient}}</p> -->
                                                            
                                                                <!-- <p><b>Start Time :</b> {{item.start_time |date:'shortTime' }}</p>
                                                                <p><b>End Time :</b> {{item.end_time |date:'shortTime'}}</p> -->
                                                                <p title={{item.visit_status}}><b><i class="pi pi-calendar"></i></b> {{item.start_date| date:'dd/MM/y'}}  
                                                                    <!-- <span [ngClass]="item.visit_status === 'Confirmed' ? 'text-green' : 'text-red'" class="pi pi-circle-fill" title={{item.visit_status}}></span> -->
                                                                 </p>
                                                                <p><b><i class="pi pi-clock"></i></b> {{item.start_time |date:'shortTime'}} - {{item.end_time |date:'shortTime'}} </p>
                                                                <p title="{{item.location}}" class="cardp"><b><i class="fas fa-map-marker-alt"></i></b> {{item.location}}  </p>
                                                                <p style="" *ngIf="item.appointment_type=='In-person'"> <b style="color:blue" class="pi pi-users"> 
                                                                
                                                                  </b>   In-person </p>
                                                                  <p style="" *ngIf="item.appointment_type=='Video'"> <b style="color:blue" class="pi pi-video"> 
                                                                 
                                                                   </b>  Video </p>
                                                                   <p style="" *ngIf="item.appointment_type=='phone'"> <b style="color:blue"  class="pi pi-phone"> 
                                                                  
                                                                   </b>   phone</p>
                                                                   <p style="" *ngIf="item.appointment_type=='chat'"> <b  style="color:blue"  class="pi pi-comments"> 
                                                                   
                                                                   </b>  chat</p>

                                                                   <p [ngClass]="item.visit_status === 'Confirmed' ? 'text-green' : 'text-red'"><b class="pi  pi-circle-fill"></b> {{item.visit_status}} </p>
                                                                

                                                                   <!-- <i *ngIf="item.appointment_type=='Video'" class="pi pi-video">Video</i>
                                                                   <i *ngIf="item.appointment_type=='phone'" class="pi pi-phone">phone</i>
                                                                   <i *ngIf="item.appointment_type=='chat'" class="pi pi-comments">chat</i> -->
                                                                <!-- <p><b>Duration :</b> {{item.duration}} Minute</p> -->
                                                                <!-- <p><b>Appointment Type :</b> {{item.appointment_type}}</p> -->
           
                                                                <!-- <p><b>Location :</b> {{item.Add_location}}</p> -->
                                                                <!-- <p><b>Arrived Time :</b> {{item.Arrived_time}}</p> -->
                                                                <!-- <p><b>Start Visit Time :</b> {{item.start_visit_time}}</p> -->
                                                                <!-- <p><b>Checkout Time :</b> {{item.checkout_time}}</p> -->
                                                                <!-- <p><b>Date Of Service :</b> {{item.DateofService}}</p>  -->
                                                                <!-- <p><b>Physical Location :</b> {{item.PhysicalLocation}}</p> -->
                                                                <!-- <i class="fa fa-info-circle" aria-hidden="true"></i> <span> Learn More </span> -->

                                                                <!-- <p  [ngClass]="item.visit_status === 'Confirmed' ? 'text-green' : 'text-red'"><b>  &nbsp;</b>   {{item.visit_status}} </p> -->
                                                            </div>
                                                            
                                                            <div >  
                                                               
                                                                    
                                                            <!-- <i class="pi pi-times" style="float: right;"></i> -->
                                                                
                                                        </div>
                                                        </div>
                                                        

                                                     
                                                            <!-- chnages for new api -->
                                                        </div>
                                                      



                                                        <!-- <div class="row" style="padding-top: 10px;display: block;">

                                                       
                                                            <div class="blockdetail" style="padding-bottom: 10px;">
                                                               
                                                                <p style="font-size: 20px; color:rgb(23, 15, 146); font-weight: bold;"><b style="color: black;">Reason Of Visit :</b> {{item.reason}} </p>
                                                                <p><b>Provider Name :</b> {{item.provider}}</p>
                                                                <p><b>Patient Name :</b> {{item.patient}}</p>
                                                                <p><b>Start Date :</b> {{item.start_date | date:'d/M/y'}}</p>
                                                              
                                                                <p><b>Time :</b> {{item.start_time |date:'shortTime'}} - {{item.end_time |date:'shortTime'}} </p>
                                                                <p><b>Duration :</b> {{item.duration}} Minute</p>
                                                                <p><b>Appointment Type :</b> {{item.appointment_type}}</p>
                                                                <p><b>Status :&nbsp;</b> <span [ngClass]="item.visit_status === 'Confirmed' ? 'text-green' : 'text-red'">{{  item.visit_status}}</span> </p>
                                                             
                                                            </div>
                                                      
                                                        </div> -->
                                                        
                                                    </div>
                                                      <!-- <button class="w3-button w3-block boxfooter"><i class="fa fa-trash-o" aria-hidden="true"></i>Remove</button> -->
                                                  
                                                </div>
                                            </div>
                                        </div>
                                    </p-tabPanel>
                                    <p-tabPanel header="Medications">
                                        <ng-template pTemplate="header">
                                            <span>Past Visits</span>
                                        </ng-template>
                                        <div class="row">
                                            <div class="col-lg-4" *ngFor="let item of pastdata">
                                                <div class="w3-card-4 pastVisitscard">
                                                    <div class="w3-container BlockMain">
                                                        <div class="row" style="padding-top: 10px; display: block;">
                                                            <!-- <div class="blockdetail" style="padding-bottom: 10px;">
                                                                <p style="font-size: 20px; color:rgb(23, 15, 146); font-weight: bold;"><b style="color: black;">Reason Of Visit :</b> {{item.reason}} </p>
                                                                <p><b>Provider Name :</b> {{item.provider}}</p>
                                                                <p><b>Patient Name :</b> {{item.patient}}</p>
                                                                <p><b>Start Date :</b> {{item.start_date| date:'d/M/y'}}</p>
                                                              
                                                                <p><b>Time :</b> {{item.start_time |date:'shortTime'}} - {{item.end_time |date:'shortTime'}} </p>
                                                                <p><b>Duration :</b> {{item.duration}} Minute</p>
                                                                   <p><b>Appointment Type :</b> {{item.appointment_type}}</p>
                                                                <p><b>Status :</b> <span [ngClass]="item.visit_status === 'Confirmed' ? 'text-green' : 'text-red'">  {{item.visit_status}} </span></p>
                                                     
                                                                <i class="fa fa-info-circle" aria-hidden="true"></i> <span> Learn More </span>
                                                            </div> -->
                                                            <p-menu #menu [model]="items" [popup]="true" appendTo="body" (onShow)='data(item.id)'></p-menu>
                                                            <div *ngIf="item.uploaded_by=='PHR'" class="text-right dots" style="position: absolute;
                                                            DISPLAY: INLINE;
                                                            right: 30px;">
                                                                <i class="pi pi-ellipsis-v dots1" (click)="menu.toggle($event)" ></i>
                                                            </div>
<!-- new card look -->
                                                            <div class="blockdetail" style="">
                                                                <!-- <p-avatar image="https://primefaces.org/cdn/primeng/images/demo/avatar/amyelsner.png" styleClass="mr-2" class="text-center" size="xlarge" shape="circle"></p-avatar> -->
                                                               <p  title={{item.reason}} style="font-size: 20px; color:rgb(23, 15, 146); font-weight: bold; height: 24px
                                                                ; overflow: hidden;text-overflow: ellipsis; white-space: nowrap;"><b style="color: black;"> </b> {{item.reason}} </p>
                                                                <p>
                                                                    <b>
                                                                        <!-- <i class="fas fa-user-md"></i> -->
                                                                        <i class="fa fa-regular fa-stethoscope"></i>
                                                                    </b>
                                                                     {{item.provider}}</p>
                                                                <!-- <p><b>Patient Name :</b> {{item.patient}}</p> -->
                                                            
                                                                <!-- <p><b>Start Time :</b> {{item.start_time |date:'shortTime' }}</p>
                                                                <p><b>End Time :</b> {{item.end_time |date:'shortTime'}}</p> -->
                                                                <p title={{item.visit_status}}><b><i class="pi pi-calendar"></i></b> {{item.start_date| date:'d/M/y'}}  
                                                                    <!-- <span [ngClass]="item.visit_status === 'Confirmed' ? 'text-green' : 'text-red'" class="pi pi-circle-fill" title={{item.visit_status}}></span> -->
                                                                 </p>
                                                                <p><b><i class="pi pi-clock"></i></b> {{item.start_time |date:'shortTime'}} - {{item.end_time |date:'shortTime'}} </p>
                                                                <p title={{item.location}} class="location cardp"   ><b><i class="fas fa-map-marker-alt"></i></b> {{item.location}}  </p>
                                                                <p style="" *ngIf="item.appointment_type=='In-person'"> <b style="color:blue" class="pi pi-users"> 
                                                                
                                                                  </b>   In-person </p>
                                                                  <p style="" *ngIf="item.appointment_type=='Video'"> <b style="color:blue" class="pi pi-video"> 
                                                                 
                                                                   </b>  Video </p>
                                                                   <p style="" *ngIf="item.appointment_type=='phone'"> <b style="color:blue"  class="pi pi-phone"> 
                                                                  
                                                                   </b>   phone</p>
                                                                   <p style="" *ngIf="item.appointment_type=='chat'"> <b  style="color:blue"  class="pi pi-comments"> 
                                                                   
                                                                   </b>  chat</p>

                                                                   <p [ngClass]="item.visit_status === 'Confirmed' ? 'text-green' : 'text-red'"><b class="pi  pi-circle-fill"></b> {{item.visit_status}} <span *ngIf="item.visitnumber!='0'"> 2</span> </p>
                                                                

                                                                   <!-- <i *ngIf="item.appointment_type=='Video'" class="pi pi-video">Video</i>
                                                                   <i *ngIf="item.appointment_type=='phone'" class="pi pi-phone">phone</i>
                                                                   <i *ngIf="item.appointment_type=='chat'" class="pi pi-comments">chat</i> -->
                                                                <!-- <p><b>Duration :</b> {{item.duration}} Minute</p> -->
                                                                <!-- <p><b>Appointment Type :</b> {{item.appointment_type}}</p> -->
           
                                                                <!-- <p><b>Location :</b> {{item.Add_location}}</p> -->
                                                                <!-- <p><b>Arrived Time :</b> {{item.Arrived_time}}</p> -->
                                                                <!-- <p><b>Start Visit Time :</b> {{item.start_visit_time}}</p> -->
                                                                <!-- <p><b>Checkout Time :</b> {{item.checkout_time}}</p> -->
                                                                <!-- <p><b>Date Of Service :</b> {{item.DateofService}}</p>  -->
                                                                <!-- <p><b>Physical Location :</b> {{item.PhysicalLocation}}</p> -->
                                                                <!-- <i class="fa fa-info-circle" aria-hidden="true"></i> <span> Learn More </span> -->

                                                                <!-- <p  [ngClass]="item.visit_status === 'Confirmed' ? 'text-green' : 'text-red'"><b>  &nbsp;</b>   {{item.visit_status}} </p> -->
                                                            </div>
                                                            
                                                        </div>
                                                    </div>
                                                    <!-- <button class="w3-button w3-block boxfooter"><i class="fa fa-trash-o" aria-hidden="true"></i>Remove</button> -->
                                                </div>
                                            </div>
                                        </div>
                                    </p-tabPanel>




                                    <!-- for reqest visit -->
                                    <p-toast></p-toast>

                                    <p-tabPanel header="Medications">
                                        <ng-template pTemplate="header">
                                            <span>Requested Visits</span>
                                        </ng-template>
                                        <div class="row">
                                            <div class="col-lg-4" *ngFor="let item of reqestdata">
                                                <div class="w3-card-4 pastVisitscard">
                                                    
                                                    <div class="w3-container BlockMain">
                                                       
                                                        <div class="row" style="padding-top: 10px;display: block; " >
                                                            
                                                            <!-- <div class="blockdetail" style="padding-bottom: 10px;">
                                                               
                                                                <p-menu #menu [model]="items" [popup]="true" appendTo="body" ></p-menu>
                                                        <div class="text-right" style="position: absolute;
                                                        DISPLAY: INLINE;
                                                        right: 30px;">
                                                            <i class="pi pi-ellipsis-v" (click)="menu.toggle($event)" ></i>
                                                        </div>

                                                        <div>
                                                                <p style="font-size: 20px; color:rgb(23, 15, 146); font-weight: bold;"><b style="color: black;">Reason Of Visit :</b> {{item.reason}} </p>
                                                                
                                                                <p><b>Provider Name :</b> {{item.provider}}</p>
                                                                <p><b>Patient Name :</b> {{item.patient}}</p>
                                                                <p *ngIf="item.start_date" style="width: 200px; overflow: hidden;
                                                                white-space: nowrap;
                                                                text-overflow: ellipsis;" title={{item.start_date}}><b> Date :</b> {{item.start_date}} </p>
                                                                <p *ngIf="!item.start_date"><b> Date :</b> NA </p>
                                                                <p *ngIf="item.start_time"><b>Start Time :</b> {{item.start_time |date:'shortTime'}}</p>
                                                                <p *ngIf="!item.start_time"><b>Start Time :</b> NA</p>
                                                                <p *ngIf="item.end_time"><b>End Time :</b> {{item.end_time | date:'shortTime'}}</p>
                                                                <p *ngIf="!item.end_time"><b>End Time :</b> NA</p>
                                                                <p><b>Appointment Type :</b> {{item.Appointment_type}}</p>
                                                   
                                                                <p><b>Status :</b> <span [ngClass]="item.visit_status === 'Confirmed' ? 'text-green' : 'text-red'">  {{item.visit_status}} </span></p>
                                                               
                                                            </div>
                                                            </div> -->


<!-- new card design for reqested visit -->
  <div class="blockdetail" style="padding-bottom: 10px;">
                                                               
                                                                <p-menu #menu [model]="items1" [popup]="true" appendTo="body" (onShow)='data(item.id)' ></p-menu>
                                                        <div class="text-right dots" style="position: absolute;
                                                        DISPLAY: INLINE;
                                                        right: 30px;">
                                                            <i class="pi pi-ellipsis-v dots1" (click)="menu.toggle($event)" ></i>
                                                        </div>

                                                        <div>
                                                            <p  title={{item.reason}} style="font-size: 20px; color:rgb(23, 15, 146); font-weight: bold; height: 24px
                                                            ; overflow: hidden;text-overflow: ellipsis; white-space: nowrap;"><b style="color: black;"> </b> {{item.reason}} </p>
                                                            <p>
                                                                
                                                                <p>
                                                                    <b>
                                                                        <!-- <i class="fas fa-user-md"></i> -->
                                                                        <i class="fa fa-regular fa-stethoscope"></i>
                                                                    </b>
                                                                     {{item.provider}}</p>
                                                                <!-- <p><b>Patient Name :</b> {{item.patient}}</p> -->
                                                                <!-- <p *ngIf="item.start_date" style="width: 200px; overflow: hidden;
                                                                white-space: nowrap;
                                                                text-overflow: ellipsis;" title={{item.start_date}}><b><i class="pi pi-calendar"></i></b> {{item.start_date  }} </p> -->
                                                                <p *ngIf="item.start_date" class="cardp" title={{item.start_date}}>
                                                                    <b><i class="pi pi-calendar"></i></b>
                                                                    <ng-container *ngFor="let startDate of item.start_date.split(',')">
                                                                      {{ startDate.trim() | date:'dd/MM/y' }}
                                                                      <!-- Add a comma and space if there are more dates -->
                                                                      <span *ngIf="!last; else noComma">  </span>
                                                                      <ng-template #noComma></ng-template>
                                                                    </ng-container>
                                                                  </p>
                                                                <p *ngIf="!item.start_date"><b> <i class="pi pi-calendar"></i></b> NA </p>
                                                                <!-- <p *ngIf="item.start_time"><b>Start Time :</b> {{item.start_time |date:'shortTime'}}</p> -->
                                                                <p *ngIf="item.start_time"><b><i class="pi pi-clock"></i></b> {{item.start_time |date:'shortTime'}} - {{item.end_time |date:'shortTime'}} </p>
                                                                <p *ngIf="!item.start_time"><b><i class="pi pi-clock"></i></b> NA</p>
                                                                <p title={{item.location}} class="location"  style=" overflow: hidden;
                                                                white-space: nowrap;
                                                                text-overflow: ellipsis;"  ><b><i class="fas fa-map-marker-alt"></i></b> {{item.location}}  </p>
                                                                <!-- <p *ngIf="item.end_time"><b>End Time :</b> {{item.end_time | date:'shortTime'}}</p>
                                                                <p *ngIf="!item.end_time"><b>End Time :</b> NA</p> -->
                                                                <!-- <p><b>Appointment Type :</b> {{item.Appointment_type}}</p> -->
                                                                <p style="" *ngIf="item.Appointment_type=='In-person'"> <b style="color:blue" class="pi pi-users"> 
                                                                
                                                                </b>   In-person </p>
                                                                <p style="" *ngIf="item.Appointment_type=='Video'"> <b style="color:blue" class="pi pi-video"> 
                                                               
                                                                 </b>  Video </p>
                                                                 <p style="" *ngIf="item.Appointment_type=='phone'"> <b style="color:blue"  class="pi pi-phone"> 
                                                                
                                                                 </b>   phone</p>
                                                                 <p style="" *ngIf="item.Appointment_type=='chat'"> <b  style="color:blue"  class="pi pi-comments"> 
                                                                 
                                                                 </b>  chat</p>
                                                                <!-- <p><b>Duration :</b> {{item.duration}} Minute</p> -->
                                                                <!-- <p><b>Status :</b> <span [ngClass]="item.visit_status === 'Confirmed' ? 'text-green' : 'text-red'">  {{item.visit_status}} </span></p> -->
                                                                
                                                                <p [ngClass]="item.visit_status === 'Confirmed' ? 'text-green' : 'text-red'"><b class="pi  pi-circle-fill"></b> {{item.visit_status}} </p>
                                                                <!-- <p><b>Date Of Service :</b> {{item.DateofService}}</p>  -->
                                                                <!-- <p><b>Physical Location :</b> {{item.PhysicalLocation}}</p> -->
                                                                <!-- <i class="fa fa-info-circle" aria-hidden="true"></i> <span> Learn More </span> -->
                                                            </div>
                                                            </div>
                                                            
                                                        </div>
                                                    </div>
                                                    <!-- <button class="w3-button w3-block boxfooter"><i class="fa fa-trash-o" aria-hidden="true"></i>Remove</button> -->
                                                </div>
                                            </div>
                                        </div>
                                    </p-tabPanel>
                                    <!-- reqest visit end -->
                                </p-tabView>
                            </div>


                        </div>
                    </div>
                    <!--  -->

                </div>
                <!-- <div class="col-lg-4">
                    <div class="container">

                        <p-calendar [(ngModel)]="date14" [inline]="true" [showWeek]="true" appendTo="body"></p-calendar>
                    </div>
                </div> -->
            </div>
        </div>
    </div>
</div>